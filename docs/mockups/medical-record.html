<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã‚«ãƒ«ãƒ†è¨˜éŒ² - åŒ»ç™‚ã‚«ãƒ«ãƒ†ã‚·ã‚¹ãƒ†ãƒ </title>
  <link rel="stylesheet" href="css/common.css">
  <style>
    .patient-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .patient-info {
      display: flex;
      gap: 30px;
    }

    .patient-info-item {
      display: flex;
      flex-direction: column;
    }

    .patient-info-label {
      font-size: 12px;
      opacity: 0.8;
    }

    .patient-info-value {
      font-size: 18px;
      font-weight: bold;
    }

    .soap-section {
      background-color: white;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .soap-header {
      font-size: 16px;
      font-weight: bold;
      margin-bottom: 15px;
      padding: 10px;
      background-color: #f5f5f5;
      border-left: 4px solid #2196F3;
    }

    .toolbar {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }

    .toolbar button {
      padding: 6px 12px;
      font-size: 13px;
    }
  </style>
</head>
<body>
  <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
  <header class="header">
    <div class="header-left">
      <div class="header-logo">ğŸ“‹ åŒ»ç™‚ã‚«ãƒ«ãƒ†ã‚·ã‚¹ãƒ†ãƒ </div>
    </div>
    <div class="header-right">
      <div class="user-info">
        <span>ğŸ‘¤ å±±ç”°åŒ»å¸« æ§˜</span>
        <button class="btn btn-outline" style="color: white; border-color: white;" onclick="location.href='login.html'">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
      </div>
    </div>
  </header>

  <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
  <nav class="navbar">
    <ul class="nav-menu">
      <li class="nav-item" onclick="location.href='dashboard.html'">ãƒ›ãƒ¼ãƒ </li>
      <li class="nav-item" onclick="location.href='patient-search.html'">æ‚£è€…</li>
      <li class="nav-item active">è¨ºç™‚</li>
      <li class="nav-item">ã‚ªãƒ¼ãƒ€ãƒ¼</li>
      <li class="nav-item">äºˆç´„</li>
      <li class="nav-item">ä¼šè¨ˆ</li>
      <li class="nav-item">ãƒ¬ãƒãƒ¼ãƒˆ</li>
      <li class="nav-item">è¨­å®š</li>
    </ul>
  </nav>

  <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ -->
  <div class="main-container">
    <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
    <aside class="sidebar">
      <ul class="sidebar-menu">
        <li class="sidebar-item" onclick="location.href='dashboard.html'">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</li>
        <li class="sidebar-item" onclick="location.href='patient-search.html'">æ‚£è€…æ¤œç´¢</li>
        <li class="sidebar-item active">ã‚«ãƒ«ãƒ†è¨˜éŒ²</li>
        <li class="sidebar-item" onclick="location.href='prescription-order.html'">å‡¦æ–¹ã‚ªãƒ¼ãƒ€ãƒ¼</li>
        <li class="sidebar-item">æ¤œæŸ»ã‚ªãƒ¼ãƒ€ãƒ¼</li>
        <li class="sidebar-item">äºˆç´„ç®¡ç†</li>
      </ul>
    </aside>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="main-content">
      <h1 style="margin-bottom: 20px;">ğŸ“ ã‚«ãƒ«ãƒ†è¨˜éŒ²ï¼ˆSOAPå½¢å¼ï¼‰</h1>

      <!-- æ‚£è€…æƒ…å ±ãƒ˜ãƒƒãƒ€ãƒ¼ -->
      <div class="patient-header">
        <div class="patient-info">
          <div class="patient-info-item">
            <span class="patient-info-label">æ‚£è€…ç•ªå·</span>
            <span class="patient-info-value" id="patientNumber">000001</span>
          </div>
          <div class="patient-info-item">
            <span class="patient-info-label">æ°å</span>
            <span class="patient-info-value" id="patientName">å±±ç”° å¤ªéƒ</span>
          </div>
          <div class="patient-info-item">
            <span class="patient-info-label">æ€§åˆ¥ / å¹´é½¢</span>
            <span class="patient-info-value">ç”·æ€§ / 44æ­³</span>
          </div>
          <div class="patient-info-item">
            <span class="patient-info-label">ç”Ÿå¹´æœˆæ—¥</span>
            <span class="patient-info-value">1980/01/01</span>
          </div>
        </div>
        <div>
          <button class="btn btn-outline" style="color: white; border-color: white;" onclick="showPatientInfo()">
            ğŸ“‹ æ‚£è€…è©³ç´°
          </button>
        </div>
      </div>

      <!-- ã‚¿ãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
      <div class="tabs">
        <div class="tab active" onclick="switchTab('allergy')">âš ï¸ ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æƒ…å ±</div>
        <div class="tab" onclick="switchTab('history')">ğŸ“œ æ—¢å¾€æ­´</div>
        <div class="tab" onclick="switchTab('prescription')">ğŸ’Š å‡¦æ–¹å±¥æ­´</div>
        <div class="tab" onclick="switchTab('lab')">ğŸ§ª æ¤œæŸ»çµæœ</div>
      </div>

      <!-- ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼è­¦å‘Š -->
      <div class="alert alert-danger" style="margin-bottom: 20px;">
        <span>âš ï¸</span>
        <div>
          <strong>ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æƒ…å ±</strong>
          <div style="font-size: 13px; margin-top: 4px;">ãƒšãƒ‹ã‚·ãƒªãƒ³ç³»æŠ—ç”Ÿå‰¤ï¼ˆã‚¢ãƒŠãƒ•ã‚£ãƒ©ã‚­ã‚·ãƒ¼ï¼‰</div>
        </div>
      </div>

      <!-- è¨˜éŒ²æƒ…å ± -->
      <div class="card">
        <div class="card-body">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <div>
              <strong>è¨˜éŒ²æ—¥æ™‚:</strong> <span id="recordDate">2024/01/15 10:30</span>
            </div>
            <div>
              <strong>è¨˜éŒ²è€…:</strong> <span id="recordStaff">å±±ç”°åŒ»å¸«</span>
            </div>
          </div>
        </div>
      </div>

      <!-- S: Subjectiveï¼ˆè‡ªè¦šç—‡çŠ¶ãƒ»ä¸»è¨´ï¼‰ -->
      <div class="soap-section">
        <div class="soap-header">S: Subjectiveï¼ˆè‡ªè¦šç—‡çŠ¶ãƒ»ä¸»è¨´ï¼‰</div>
        <div class="toolbar">
          <button class="btn btn-outline">
            ğŸ“‹ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
          </button>
          <button class="btn btn-outline">
            ğŸ¤ éŸ³å£°å…¥åŠ›
          </button>
        </div>
        <textarea class="form-textarea" id="subjective" rows="5" placeholder="æ‚£è€…ã®è¨´ãˆã€è‡ªè¦šç—‡çŠ¶ã‚’è¨˜éŒ²...">3æ—¥å‰ã‚ˆã‚Šå’³å—½ã€ç™ºç†±ã‚ã‚Šã€‚
æ˜¨å¤œã‚ˆã‚Š38åº¦å°ã®ç™ºç†±ç¶™ç¶šã€‚
å€¦æ€ æ„ŸãŒå¼·ãã€é£Ÿæ¬²ã‚‚ä½ä¸‹ã—ã¦ã„ã‚‹ã€‚</textarea>
      </div>

      <!-- O: Objectiveï¼ˆä»–è¦šæ‰€è¦‹ï¼‰ -->
      <div class="soap-section">
        <div class="soap-header">O: Objectiveï¼ˆä»–è¦šæ‰€è¦‹ï¼‰</div>
        <div class="toolbar">
          <button class="btn btn-outline" onclick="insertVitals()">
            ğŸ“Š ãƒã‚¤ã‚¿ãƒ«æŒ¿å…¥
          </button>
        </div>
        <textarea class="form-textarea" id="objective" rows="5" placeholder="æ¤œæŸ»æ‰€è¦‹ã€èº«ä½“æ‰€è¦‹ã‚’è¨˜éŒ²...">BT 38.2â„ƒ BP 120/80 PR 82 SpO2 97%
å’½é ­ç™ºèµ¤(+) æ‰æ¡ƒè…«å¤§(+)
é ¸éƒ¨ãƒªãƒ³ãƒ‘ç¯€è…«è„¹(+)
è‚ºéŸ³: æ¸…ã€ãƒ©éŸ³ãªã—</textarea>
      </div>

      <!-- A: Assessmentï¼ˆè©•ä¾¡ãƒ»è¨ºæ–­ï¼‰ -->
      <div class="soap-section">
        <div class="soap-header">A: Assessmentï¼ˆè©•ä¾¡ãƒ»è¨ºæ–­ï¼‰</div>
        <textarea class="form-textarea" id="assessment" rows="4" placeholder="è¨ºæ–­ã€è©•ä¾¡ã‚’è¨˜éŒ²...">æ€¥æ€§ä¸Šæ°—é“ç‚
ç´°èŒæ„ŸæŸ“ã®å¯èƒ½æ€§ã‚ã‚Š</textarea>
        <div style="margin-top: 10px;">
          <button class="btn btn-secondary" onclick="registerDisease()">
            â• ç—…åç™»éŒ²
          </button>
        </div>
      </div>

      <!-- P: Planï¼ˆè¨ˆç”»ãƒ»æ²»ç™‚æ–¹é‡ï¼‰ -->
      <div class="soap-section">
        <div class="soap-header">P: Planï¼ˆè¨ˆç”»ãƒ»æ²»ç™‚æ–¹é‡ï¼‰</div>
        <textarea class="form-textarea" id="plan" rows="5" placeholder="æ²»ç™‚è¨ˆç”»ã€å‡¦æ–¹å†…å®¹ã‚’è¨˜éŒ²...">å¯¾ç—‡ç™‚æ³•
è§£ç†±é®ç—›å‰¤ã€æŠ—ç”Ÿå‰¤æŠ•ä¸
ååˆ†ãªæ°´åˆ†æ‘‚å–ã¨å®‰é™ã‚’æŒ‡å°
3æ—¥å¾Œå†è¨ºæŒ‡ç¤º</textarea>
        <div style="margin-top: 10px; display: flex; gap: 10px;">
          <button class="btn btn-secondary" onclick="location.href='prescription-order.html'">
            ğŸ’Š å‡¦æ–¹ã‚ªãƒ¼ãƒ€ãƒ¼
          </button>
          <button class="btn btn-secondary">
            ğŸ§ª æ¤œæŸ»ã‚ªãƒ¼ãƒ€ãƒ¼
          </button>
          <button class="btn btn-secondary">
            ğŸ“… æ¬¡å›äºˆç´„
          </button>
        </div>
      </div>

      <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
      <div class="card">
        <div class="card-body">
          <div class="btn-group" style="justify-content: center;">
            <button class="btn btn-outline" onclick="saveDraft()">
              ğŸ’¾ ä¸€æ™‚ä¿å­˜
            </button>
            <button class="btn btn-primary" onclick="signRecord()">
              âœï¸ ç½²åã—ã¦ç¢ºå®š
            </button>
            <button class="btn btn-danger" onclick="cancelRecord()">
              âŒ ã‚­ãƒ£ãƒ³ã‚»ãƒ«
            </button>
          </div>
        </div>
      </div>

    </main>
  </div>

  <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
  <footer class="footer">
    Â© 2024 Medical System. All rights reserved. | ãƒ˜ãƒ«ãƒ— | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.0.0
  </footer>

  <script>
    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®å‡¦ç†
    window.addEventListener('DOMContentLoaded', function() {
      const patientId = sessionStorage.getItem('selectedPatientId');
      const patientName = sessionStorage.getItem('selectedPatientName');
      
      if (patientId) {
        document.getElementById('patientNumber').textContent = patientId;
      }
      if (patientName) {
        document.getElementById('patientName').textContent = patientName;
      }

      // ç¾åœ¨æ—¥æ™‚ã‚’ã‚»ãƒƒãƒˆ
      const now = new Date();
      const dateStr = `${now.getFullYear()}/${String(now.getMonth()+1).padStart(2,'0')}/${String(now.getDate()).padStart(2,'0')} ${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}`;
      document.getElementById('recordDate').textContent = dateStr;
    });

    function switchTab(tab) {
      alert(`${tab}ã‚¿ãƒ–ã‚’è¡¨ç¤ºã—ã¾ã™`);
    }

    function showPatientInfo() {
      alert('æ‚£è€…è©³ç´°æƒ…å ±ã‚’è¡¨ç¤ºã—ã¾ã™');
    }

    function insertVitals() {
      const vitals = '\nBT 37.2â„ƒ BP 120/80 PR 75 SpO2 98%';
      const textarea = document.getElementById('objective');
      textarea.value += vitals;
    }

    function registerDisease() {
      alert('ç—…åç™»éŒ²ç”»é¢ã‚’è¡¨ç¤ºã—ã¾ã™');
    }

    function saveDraft() {
      if (confirm('ã‚«ãƒ«ãƒ†ã‚’ä¸€æ™‚ä¿å­˜ã—ã¾ã™ã‹ï¼Ÿ')) {
        alert('ã‚«ãƒ«ãƒ†ã‚’ä¸€æ™‚ä¿å­˜ã—ã¾ã—ãŸ');
      }
    }

    function signRecord() {
      const s = document.getElementById('subjective').value;
      const o = document.getElementById('objective').value;
      const a = document.getElementById('assessment').value;
      const p = document.getElementById('plan').value;

      if (!s && !o && !a && !p) {
        alert('ã‚«ãƒ«ãƒ†å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        return;
      }

      if (confirm('ã‚«ãƒ«ãƒ†ã«ç½²åã—ã¦ç¢ºå®šã—ã¾ã™ã‹ï¼Ÿ\nç¢ºå®šå¾Œã¯ç·¨é›†ã§ãã¾ã›ã‚“ã€‚')) {
        alert('ã‚«ãƒ«ãƒ†ã«ç½²åã—ã¾ã—ãŸã€‚è¨ºç™‚ã‚’å®Œäº†ã—ã¾ã™ã€‚');
        location.href = 'dashboard.html';
      }
    }

    function cancelRecord() {
      if (confirm('ã‚«ãƒ«ãƒ†ã®è¨˜éŒ²ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¾ã™ã‹ï¼Ÿ\nå…¥åŠ›å†…å®¹ã¯ä¿å­˜ã•ã‚Œã¾ã›ã‚“ã€‚')) {
        location.href = 'dashboard.html';
      }
    }
  </script>
</body>
</html>
